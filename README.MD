# Api de Login com sistema de Produtos (Java üöÄ com Spring Boot üçÉ, Spring Security üõ°Ô∏è + JWT üîê + Oauth2 üõ° e MySQL üê¨)

Este √© um projeto Java Spring boot, que consiste em uma API para cadastro e login de usu√°rios, que podem realizar pedidos de acordo com os produtos registrados no sistema, essa Api possui seguran√ßa via spring security, jwt e oauth2, cada role tem sua permiss√£o, sendo elas os ADMIN e COMMON.

## Configura√ß√£o

1. √â necess√°rio ter o Java 21 e o MySQL instalados no PC.

2. Clone o reposit√≥rio para sua m√°quina local:

    ```bash
    git clone https://github.com/Thullyoo/user-microservice
    ```

3. Navegue at√© o diret√≥rio do projeto:

    ```bash
    cd user-microservice
    ```

4. Instale as depend√™ncias com o maven

5. Coloque suas vari√°veis necess√°rias no application.properties, as seguintes vari√°veis s√£o necess√°rias:
    - spring.datasource.url
    - spring.datasource.username
    - spring.datasource.password

6. √â necess√°rio criar duas chaves, sendo a p√∫blica e a privada e armazenar elas em application.properties com o nome de app.key para a privada e app.pub para a p√∫blica.

6. Inicie a aplica√ß√£o

A aplica√ß√£o estar√° rodando em `http://localhost:8080`.

### Endpoints

- `POST /login`: Logar usu√°rio.  (N√£o √© necess√°rio estar autenticado, pois geram o token para a autentica√ß√£o)
- `POST /register`: Registrar usu√°rio. (N√£o √© necess√°rio estar autenticado, pois geram o token para a autentica√ß√£o)
- `POST /product/register`: Registrar produto. (√â necess√°rio estar autenticado via Bearer token como usu√°rio com role ADMIN)
- `POST /order/create`: Criar pedido. (√â necess√°rio estar autenticado via Bearer token com role COMMON) 
- `GET /users/view`: Visualizar todos os usu√°rios. (√â necess√°rio estar autenticado via Bearer token como usu√°rio com role ADMIN)
- `GET /product/view`: Visualizar todos os produtos. (√â necess√°rio estar autenticado via Bearer token como usu√°rio com role ADMIN ou COMMON)
- `GET /order/view/all`: Visualizar todos os pedidos. (√â necess√°rio estar autenticado via Bearer token como usu√°rio com role ADMIN)
- `GET /order/view`: Visualiza todos os pedidos de um usu√°rio. (√â necess√°rio estar autenticado via Bearer token com role COMMON)

### Formato dos dados

As requisi√ß√µes e respostas s√£o no formato JSON. Exemplo de como se deve passar o JSON no POST:

POST /register:

```json
{
    "name": "name",
    "password": "password",
    "email": "email"   
}
```

POST /login:

```json
{
  "email": "email",
  "password": "password"
}
```

POST /product/register

```json
{
  "name": "name",
  "price": 0.0,
  "quantity": 1
}
```

POST /order/create

```json
{
  "productsId": [
    1,
    2
  ],
  "emailUser": "email@email.com"
}
```

GET /order/view

```json
{
  "email": "email@email.com"
}
```


